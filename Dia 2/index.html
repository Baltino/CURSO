<!DOCTYPE html> 
<html> 
	<head> 
	<title>Dia 2</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
	<link rel="stylesheet" href="css/default.css" type="text/css" />
	
	
</head> 
<body> 
	<!-- Start of first page -->
	<div data-role="page" id="inicial">

		<div data-role="header" data-id="menu" >
			<h1>Dia 2</h1>
			<div data-role="navbar" >
				<ul>
					<li><a href="#inicial" data-prefetch="true" class="ui-btn-active ui-state-persist">Pagina inicio</a></li>
					<li><a href="#p1" data-prefetch="true" data-transition="slidedown">Pagina 1</a></li>
					<li><a href="#p2" data-prefetch="true" data-transition="slidedown">Pagina 2</a></li>
					<li><a href="#p3" data-prefetch="true" data-transition="slidedown">Pagina 3</a></li>
				</ul>
			</div><!-- /navbar -->
		</div><!-- /header -->

		<div data-role="content">	
			<div class="centrado">
				<p data-role="button" onclick="buttonClickMovie()"> Botón </p>
				<label for="basic">Alias:</label>
				<input type="text" name="name" id="alias" value=""  />
				<a href="pages/sample1.php" data-role="button" data-inline="true" data-rel="page" data-transition="pop">Sample 1</a>
				<div id="response"> </div>
			</div>
		</div><!-- /content -->

	</div><!-- /page -->
	
	<!-- Start of second page -->
	<div data-role="page" id="p1">

		<div data-role="header" data-id="menu" >
			<h1>Primer noticia</h1>
			<div data-role="navbar">
				<ul>
					<li><a href="#inicial" data-prefetch="true" data-transition="slideup" >Pagina inicio</a></li>
					<li><a href="#p1" data-prefetch="true" class="ui-btn-active ui-state-persist">Pagina 1</a></li>
					<li><a href="#p2" data-prefetch="true" data-transition="slidedown">Pagina 2</a></li>
					<li><a href="#p3" data-prefetch="true" data-transition="slidedown">Pagina 3</a></li>
				</ul>
			</div><!-- /navbar -->
		</div><!-- /header -->

		<div data-role="content">	
			<h4>Principio de acuerdo entre el gobierno bonaerense y los docentes</h4>
			<p>
				Luego de la reunión que funcionarios de Daniel Scioli mantuvieron
				con los representantes del Frente Gremial para arribar a un acuerdo
				salarial en el marco de la discusión paritaria, el secretario general
				de Suteba, Roberto Baradel, confirmó que el .
			</p>		
			<a href="#acuerdo" data-rel="dialog" data-transition="pop">Imagen</a>
		</div><!-- /content -->

		<div data-role="footer">
			<h4>Page Footer</h4>
			
		</div><!-- /footer -->
	</div><!-- /page -->
	
	<!-- Start of third page -->
	<div data-role="page" id="p2" >

		<div data-role="header" data-id="menu" >
			<h1>Segunda noticia</h1>
			<div data-role="navbar">
				<ul>
					<li><a href="#inicial" data-prefetch="true" data-transition="slideup">Pagina inicio</a></li>
					<li><a href="#p1" data-prefetch="true" data-transition="slideup" >Pagina 1</a></li>
					<li><a href="#p2" data-prefetch="true" class="ui-btn-active ui-state-persist">Pagina 2</a></li>
					<li><a href="#p3" data-prefetch="true" data-transition="slidedown">Pagina 3</a></li>
				</ul>
			</div><!-- /navbar -->
		</div><!-- /header -->

		<div data-role="content">	
			<h4>Teresa Pàmies muere a los 93 años</h4>	
			<p>
			La escritora Teresa Pàmies ha hallecido hoy a los 92 años en Granada en 
			casa de su hijo Antonio. La autora, nacida en Balaguer, Lleida, en 1919,
			recibió a lo largo de su carrera reconocimientos como la Creu de Sant
			Jordi de la Generalitat de Catalunya, .
			</p>
			<a href="#teresa" data-role="button" data-rel="dialog" data-transition="pop">Imagen</a>
		</div><!-- /content -->

		<div data-role="footer">
			<h4>Page Footer</h4>
		</div><!-- /footer -->
	</div><!-- /page -->
	
	<!-- Start of fourth page -->
	<div data-role="page" id="p3">

		<div data-role="header" data-id="menu">
			<h1>Tercer noticia</h1>
			<div data-role="navbar">
				<ul>
					<li><a href="#inicial" data-prefetch="true" data-transition="slideup">Pagina inicio</a></li>
					<li><a href="#p1" data-prefetch="true" data-transition="slideup">Pagina 1</a></li>
					<li><a href="#p2" data-prefetch="true" data-transition="slideup">Pagina 2</a></li>
					<li><a href="#p3" data-prefetch="true" class="ui-btn-active ui-state-persist" >Pagina 3</a></li>
				</ul>
			</div><!-- /navbar -->
		</div><!-- /header -->

		<div data-role="content">	
			<h4>El Estado asumirá el 0,5% adicional de la reducción del déficit</h4>
			<p>
			El ministro de Hacienda y Administraciones Públicas, Cristóbal Montoro,
			ha defendido el techo de los Presupuestos Generales del Estado para 2012,
			en el que "la reducción máyor del déficit público recaería sobe la 
			administración del Estado".
			</p>		
			<a href="#deficit" data-rel="dialog" data-transition="pop">Imagen</a>
				
		</div><!-- /content -->

		<div data-role="footer">
			<h4>Page Footer</h4>
		</div><!-- /footer -->
	</div><!-- /page -->
	
	<!-- DIALOGS -->
		<div data-role="page" id="acuerdo">

			<div data-role="header">
				<h1>Acuerdo</h1>
			</div><!-- /header -->

			<div data-role="content">	
				<img class="image" src="images/acuerdo.jpg" />
				<p>Los sindicatos siguen negociando con el gobierno bonaerense. 
				De no acercarse posiciones, podría haber más medidas de fuerza.
				</p>	
			
			</div><!-- /content -->
			
		</div><!-- /page -->

		<div data-role="page" id="teresa">

			<div data-role="header">
				<h1>Teresa</h1>
			</div><!-- /header -->
			
			<div data-role="content">	
				<img class="image" src="images/teresa.jpg" />
				<p>
				La escritora Teresa Pàmies, en una imagen de 1993. PEPE ENCINAS
				</p>		
			</div><!-- /content -->

		</div><!-- /page -->

		<div data-role="page" id="deficit">

			<div data-role="header">
				<h1>Deficit</h1>
			</div><!-- /header -->
			
			
			<div data-role="content">	
				<img class="image" src="images/deficit.jpg" />
				<p>
				El Estado asumirá el 0,5% adicional de la reducción del déficit
				</p>		
			</div><!-- /content -->

		</div><!-- /page -->		
		
</body>
<script>
		$( '#inicial' ).live( 'pageinit',function(event){
			alert("La página ha terminado de cargarse");
			
			
			$( '#inicial' ).bind('keyup', function(e) {
				//var code = (e.keyCode ? e.keyCode : e.which);
				if(e.which == 27)//esc
					$.mobile.hidePageLoadingMsg();
			});
			$('#alias').focus();
			$('a').buttonMarkup({ theme: "a" ,inline:true});
		});
		
		
		
		function buttonClickWelcome(){
			
				var response_div = $('#response');
			$.mobile.showPageLoadingMsg();
				  $.ajax({
				url: "api/dispatcher.php",
				data: {service: 'welcome.hello', params: {'name': $('#alias').val()}},
				success: function(data) {
						response_div.html('');
					   
					   response_div.append(data);
					   
					   response_div.show('fast');
					
					   resaltarNombre();
					   
					 },
				error: function(jqXHR, textStatus, errorThrown) {
							response_div.html('');
							response_div.append("Error "+errorThrown+": "+ textStatus);
							response_div.show('fast');
							response_div.css('background','red');
						}
				});
					
		}
		
		function buttonClickMovie(){
			var response_div = $('#response');
			$.mobile.showPageLoadingMsg();
			$.ajax({
					url: 'http://albertomiranda.com.ar/html5/bootcamp/api/dispatcher.php?service=movie.getTop',
					type: "POST",
					crossDomain: true,
					contentType: "application/json",
					data: "{}",
					dataType: "jsonp",
					jsonpCallback: "myjson",
					success: function(data) {
						//	response_div.html('');	
				
						 	
						   response_div.fadeIn();					
						 
						 },
					error: function(jqXHR, textStatus, errorThrown) {
								response_div.html('');
								response_div.append("Error "+errorThrown+": "+ textStatus);
									
								response_div.show('fast');
								response_div.css('background','red');
							}
					});
	
				
		}
				
		function myjson(data){
			var response_div = $('#response');
			var string;
			result = data;
			alert("Movies: "+result.data.length);
			string = '<ul data-role="listview" id="movies" data-theme="a">'+
			'<li data-role="list-divider" role="heading"> Movies </li>';
			for(var i=0, len = result.data.length; i < len; i++){
				string += '<li><a >'+
				'<img src="'+result.data[i]['BoxArt']['SmallUrl']+'" class="ui-li-thumb">'+result.data[i]['Name']+
				'<p> Average rating: '+ result.data[i]['AverageRating'] + '</p></a></li>';
			}
			
			string += '</ul>';
			response_div.html(string);
			$('#movies').listview();
			response_div.show('fast');
			
			//delego el click al handler
			$('#movies').on('click', 'a', function () {
				//movie object json 
				var movie = result.data[$(this).parents('li').eq(0).index()];
				dialog = '<div data-role="dialog" id="movieDesc">'+
							'<div data-role="header">'+
								'<h1>'+movie['Name']+' ('+movie['ReleaseYear']+')</h1>'+
							'</div>'+			
							'<div data-role="content">	'+
								'<img class="image" src="'+movie['BoxArt']['LargeUrl']+' />'+
								'<p>'+
								movie['Synopsis']+
								'</p>'+
							'</div>'+
						'</div>';
					
				//	$(dialog).appendTo('#inicial');
					
					
				});
				
			//
		}
			 
		  
    </script>
</html>