<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Dia 1</title>
	
	    
	<link rel="stylesheet" href="css/default.css" type="text/css" />
	  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<script src='https://www.google.com/jsapi' type='text/javascript'></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

   
   
   </head>
  <body>
   

	<div id="fuzz">
		<div id="response"> 
			<a class="close" href="#" >X</a> 
		 </div>
	</div>
	
	<button onclick="buttonClick()"> Botón </button>
	<input type="text" size="50" id="alias"/>
  </body>
  
   <script>
		var result;
		$(document).ready(function(){
			alert("La página ha terminado de cargarse");
			$('#alias').focus();
			
	
			 //Adjust height of overlay to fill screen when page loads  
		   $("#fuzz").css("height", $(document).height());  
		  
		
		  
		   //When the message box is closed, fade out  
		   $(".close").click(function(){  
			  $("#fuzz").fadeOut();  
			  return false;  
		   });  
		
			
		});
		
		
		
		function buttonClick(){
			
				var response_div = $('#response');
	
//		$("#fuzz").fadeIn();  
		
		
		$.ajax({
                url: 'http://albertomiranda.com.ar/html5/bootcamp/api/dispatcher.php?service=movie.getTop',
                type: "POST",
                crossDomain: true,
                contentType: "application/json",
                data: "{}",
                dataType: "jsonp",
                jsonpCallback: "myjson",
				success: function(data) {
					//	response_div.html('');	
			
					   response_div.append(data);	
						
					   response_div.fadeIn();					
					   highlightName();					   
					 },
				error: function(jqXHR, textStatus, errorThrown) {
							response_div.html('');
							response_div.append("Error "+errorThrown+": "+ textStatus);
								
							response_div.show('fast');
							response_div.css('background','red');
						}
				});
			
		}
		function highlightName(){
			$("div:contains('maxi')").effect("highlight", {}, 6000);			
		}
		
		function myjson(data){
			var response_div = $('#response');
			result = data;
			response_div.append(
			'<h4>'+ result.data[0]['Name']+'</h4>'+
			'<div class="centrado"> <video autoplay controls>'+
  '<source src="http://people.opera.com/patrickl/articles/introduction-html5-video/videos/turkish.mp4"></video></div>');

		response_div.append('<p>'+result.data[0]['ReleaseYear']+'.</p><p>'+result.data[0]['Synopsis']+'<p>');
		response_div.show('fast');
		}
		 
		$("#fuzz").css("height", $(document).height());  
		$(window).bind("resize", function(){  
		   $("#fuzz").css("height", $(window).height());  
		});  
</script>
  
</html>



